Пример конфигурационного файла dashboards.yaml для provisioning дашбордов:

apiVersion: 1

providers:
  - name: 'default'
    orgId: 1
    folder: ''
    type: file
    options:
      path: /etc/grafana/provisioning/dashboards

В данном примере, провайдер с именем 'default' указан для настройки provisioning дашбордов. Организации orgId установлена с идентификатором 1, что означает, что дашборды будут доступны для всех организаций. Путь к каталогу с описаниями дашбордов - /etc/grafana/provisioning/dashboards.

Пример файла с описанием дашборда в JSON (example_dashboard.json):

{
  "dashboard": {
    "id": null,
    "uid": "example_dashboard",
    "title": "Example Dashboard",
    "panels": [
      {
        "type": "graph",
        "title": "Example Panel",
        "targets": [
          {
            "refId": "A",
            "query": "SELECT * FROM example_table"
          }
        ],
        "gridPos": {
          "x": 0,
          "y": 0,
          "w": 12,
          "h": 6
        },
        "id": 1
      }
    ],
    "timezone": "browser",
    "schemaVersion": 16,
    "version": 0
  },
  "folderId": 0,
  "overwrite": false
}

Пример файла с описанием дашборда в YML (example_dashboard.yml):

dashboard:
  id: null
  uid: example_dashboard
  title: Example Dashboard
  panels:
    - type: graph
      title: Example Panel
      targets:
        - refId: A
          query: SELECT * FROM example_table
      gridPos:
        x: 0
        y: 0
        w: 12
        h: 6
      id: 1
  timezone: browser
  schemaVersion: 16
  version: 0
folderId: 0
overwrite: false

В обоих примерах, описывается один дашборд с одной панелью типа "graph" и одним запросом к источнику данных. Заданные параметры включают название дашборда, заголовок панели, запрос данных, позицию на графической сетке и другие информационные поля.

Файлы с описаниями дашбордов в формате JSON или YAML размещаются в каталоге, указанном в поле "path" конфигурационного файла dashboards.yaml. При запуске или перезагрузке Grafana, эти файлы будут автоматически обработаны, и дашборды будут созданы или обновлены в соответствии с указанными файлами описаний.


Пример конфигурационного файла dashboards.yaml:

- apiVersion: Версия API для провиженинга. В данном случае используется значение 1.

- providers: Список провайдеров (источников данных) для провиженинга.

  - name: Имя провайдера. Может быть любой уникальной строкой, используется для идентификации провайдера в Grafana.

  - orgId: Идентификатор организации, к которой будут относиться дашборды. Может быть установлен на конкретную организацию (например, значение 1), чтобы дашборды были доступны только для этой организации, или оставлен пустым, чтобы дашборды были доступны для всех организаций.

  - folder: Имя папки, в которую будут помещены дашборды. Может быть пустым, чтобы дашборды были размещены в корневом каталоге.

  - type: Тип провайдера. В данном случае используется тип "file", так как дашборды будут созданы из файлов.

  - options: Дополнительные параметры провайдера.

    - path: Путь к каталогу, где находятся файлы описаний дашбордов.

Пример файла с описанием дашборда в JSON (example_dashboard.json):

- dashboard: Объект, содержащий информацию о дашборде.

  - id: Идентификатор дашборда. Может быть "null", что означает, что будет создан новый дашборд.

  - uid: Уникальный идентификатор дашборда. Используется для ссылок на дашборд извне Grafana.

  - title: Заголовок дашборда.

  - panels: Массив объектов, представляющих панели на дашборде.

    - type: Тип панели. В данном случае используется тип "graph" (график).

    - title: Заголовок панели.

    - targets: Массив объектов, представляющих цели запросов данных для панели.

      - refId: Идентификатор запроса данных. Используется для связи запросов и панелей.

      - query: Запрос данных для панели.

    - gridPos: Положение панели на графической сетке.

      - x, y: Координаты панели на сетке.

      - w, h: Ширина и высота панели.

    - id: Идентификатор панели.

  - timezone: Часовой пояс, используемый для отображения дашборда. В данном случае используется значение "browser", что означает использование часового пояса браузера.

  - schemaVersion: Версия схемы дашборда.

  - version: Версия дашборда.

- folderId: Идентификатор папки, в которую будет размещен дашборд. В данном примере используется значение 0, что означает, что дашборд будет помещен в корневую папку.

- overwrite: Опция, указывающая, должен ли быть перезаписан существующий дашборд, если он уже существует с таким же UID. В данном случае используется значение false, что значит, что существующий дашборд не будет перезаписан.

Аналогичные поля присутствуют и в примере файла с описанием дашборда в формате YML (example_dashboard.yml), только синтаксис YML используется вместо JSON.
